# ğŸš€ ZettiBot

**Assistente Digital de Vendas para Telegram**

*Transforme caos em estratÃ©gia e potencialize seus resultados comerciais*

![Next.js](https://img.shields.io/badge/Next.js-14.0.2-black?style=flat-square&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-5.2.2-blue?style=flat-square&logo=typescript)
![Supabase](https://img.shields.io/badge/Supabase-Latest-green?style=flat-square&logo=supabase)
![Telegram](https://img.shields.io/badge/Telegram-Bot_API-blue?style=flat-square&logo=telegram)
![Vercel](https://img.shields.io/badge/Vercel-Deployed-black?style=flat-square&logo=vercel)
![Version](https://img.shields.io/badge/Version-1.2.0-green?style=flat-square)
![Status](https://img.shields.io/badge/Status-Production_Ready-brightgreen?style=flat-square)
![Uptime](https://img.shields.io/badge/Uptime-99.9%25-brightgreen?style=flat-square)

---

## ğŸ“‹ Sobre o Projeto

ZettiBot Ã© um assistente digital inovador desenvolvido especificamente para vendedores externos. AtravÃ©s do Telegram, oferece uma suite completa de ferramentas para gestÃ£o de clientes, agenda, lembretes e **follow-up de leads com pipeline de vendas**.

### ğŸ¯ **Funcionalidades Implementadas (v1.2.0)**

- ğŸ‘¥ **GestÃ£o Completa de Clientes** - CRUD com validaÃ§Ãµes robustas e busca avanÃ§ada
- ğŸ“… **Agenda Inteligente** - Compromissos com paginaÃ§Ã£o e ediÃ§Ã£o completa  
- ğŸ”” **Sistema de Lembretes** - CriaÃ§Ã£o, ediÃ§Ã£o e notificaÃ§Ãµes automÃ¡ticas
- ğŸ¯ **Follow-up de Leads** - Pipeline completo de vendas com estÃ¡gios ğŸ†•
- ğŸ“ **HistÃ³rico de Contatos** - Registro detalhado de interaÃ§Ãµes ğŸ†•
- â° **NotificaÃ§Ãµes AutomÃ¡ticas** - Lembretes de 5min a 24h antes (agenda, lembretes e follow-ups)
- ğŸ• **Fuso HorÃ¡rio Brasileiro** - GestÃ£o correta de horÃ¡rios UTC-3
- ğŸ” **Busca AvanÃ§ada** - Por nome, CNPJ ou contato em todos os mÃ³dulos
- ğŸ“± **Interface Conversacional** - InteraÃ§Ã£o natural via Telegram

### âœ¨ **Diferenciais TÃ©cnicos**

- **Arquitetura Modular** - CÃ³digo limpo, escalÃ¡vel e bem estruturado
- **TypeScript Rigoroso** - Tipagem forte e validaÃ§Ãµes robustas
- **Multi-etapas Inteligente** - Conversas que guiam o usuÃ¡rio naturalmente  
- **Cache Otimizado** - Performance melhorada com cache de usuÃ¡rios
- **Rate Limiting** - ProteÃ§Ã£o contra spam e uso excessivo
- **Logs de Auditoria** - Rastreamento completo de aÃ§Ãµes
- **Pipeline de Vendas** - GestÃ£o profissional de leads e oportunidades ğŸ†•

---

## ğŸ¯ **STATUS ATUAL (v1.2.0)**

### âœ… **FUNCIONALIDADES COMPLETAS (100%)**

#### **ğŸ—ï¸ Sistema Base**
- âœ… Cadastro/autenticaÃ§Ã£o de usuÃ¡rios
- âœ… Menu principal navegÃ¡vel
- âœ… Sistema de cancelamento universal
- âœ… Middleware de autenticaÃ§Ã£o robusto
- âœ… Cache de usuÃ¡rios para performance
- âœ… Rate limiting anti-spam
- âœ… Logs de auditoria completos

#### **ğŸ‘¥ GestÃ£o de Clientes**
- âœ… CRUD completo (criar, listar, editar, excluir)
- âœ… ValidaÃ§Ãµes robustas (CNPJ real, telefone, email)
- âœ… Busca avanÃ§ada (nome, CNPJ, contato)
- âœ… PaginaÃ§Ã£o automÃ¡tica inteligente
- âœ… FormataÃ§Ã£o de dados brasileira
- âœ… SanitizaÃ§Ã£o e limpeza de inputs

#### **ğŸ“… GestÃ£o de Agenda**
- âœ… Criar compromissos (com/sem cliente vinculado)
- âœ… Editar compromissos existentes
- âœ… Listar com paginaÃ§Ã£o inteligente
- âœ… Concluir/cancelar compromissos
- âœ… Busca e vinculaÃ§Ã£o de clientes
- âœ… ValidaÃ§Ã£o de datas/horÃ¡rios futuro
- âœ… NotificaÃ§Ãµes automÃ¡ticas configurÃ¡veis

#### **ğŸ”” Sistema de Lembretes**
- âœ… Criar lembretes personalizados (tÃ­tulo, descriÃ§Ã£o, data/hora)
- âœ… Sistema de prioridades (Alta ğŸ”´, MÃ©dia ğŸŸ¡, Baixa ğŸ”µ)
- âœ… Listar lembretes pendentes com paginaÃ§Ã£o
- âœ… Editar lembretes existentes (todos os campos)
- âœ… Concluir/excluir lembretes
- âœ… BotÃµes de atalho "Hoje/AmanhÃ£"
- âœ… NotificaÃ§Ãµes automÃ¡ticas (5min a 24h antes)

#### **ğŸ¯ Follow-up de Leads** ğŸ†•
- âœ… Criar follow-ups vinculados a clientes (existentes ou novos)
- âœ… Pipeline de vendas com 5 estÃ¡gios (ğŸ”ğŸ“‹ğŸ’°ğŸ¤âœ…)
- âœ… GestÃ£o de valor estimado com formataÃ§Ã£o monetÃ¡ria
- âœ… PrevisÃ£o de fechamento com validaÃ§Ã£o
- âœ… Status do lead (Ativo, Ganho, Perdido)
- âœ… Listar follow-ups por status com paginaÃ§Ã£o
- âœ… Editar follow-ups existentes (tÃ­tulo, valor, estÃ¡gio, datas)
- âœ… Busca inteligente de clientes para vinculaÃ§Ã£o
- âœ… CriaÃ§Ã£o inline de clientes durante follow-up

#### **ğŸ“ HistÃ³rico de Contatos** ğŸ†•
- âœ… Registrar interaÃ§Ãµes (ligaÃ§Ã£o, email, reuniÃ£o, WhatsApp, visita)
- âœ… HistÃ³rico completo cronolÃ³gico de contatos
- âœ… Definir prÃ³ximas aÃ§Ãµes com datas/horÃ¡rios
- âœ… AtualizaÃ§Ã£o de estÃ¡gio apÃ³s contato
- âœ… Timeline visual de evoluÃ§Ã£o do lead
- âœ… Resumo e observaÃ§Ãµes detalhadas

#### **âš¡ Sistema de NotificaÃ§Ãµes**
- âœ… Lembretes de agenda personalizÃ¡veis (15min, 30min, 1h, 5h, 12h, 24h)
- âœ… Lembretes de tarefas personalizÃ¡veis (5min, 15min, 30min, 1h, 24h)
- âœ… Lembretes de follow-up (1h, 24h, 3 dias antes) ğŸ†•
- âœ… Lembretes de contato (15min, 1h, 24h, 3 dias antes) ğŸ†•
- âœ… Processamento automÃ¡tico via cron-job externo
- âœ… Retry automÃ¡tico com atÃ© 3 tentativas
- âœ… Limpeza automÃ¡tica de notificaÃ§Ãµes antigas
- âœ… GestÃ£o correta de fuso horÃ¡rio brasileiro

#### **ğŸ›¡ï¸ SeguranÃ§a e Performance**
- âœ… Rate limiting para prevenir spam
- âœ… Timeouts em operaÃ§Ãµes de banco
- âœ… ValidaÃ§Ã£o rigorosa de inputs
- âœ… Logs de auditoria detalhados
- âœ… Tratamento robusto de erros
- âœ… Queries otimizadas com joins

### ğŸš§ **PLANEJADO PARA PRÃ“XIMAS VERSÃ•ES**
- ğŸ“Š **RelatÃ³rios e Analytics** - MÃ©tricas de vendas e performance
- ğŸ—ºï¸ **Rotas Otimizadas** - Planejamento inteligente de visitas
- ğŸŒ **Dashboard Web** - Interface administrativa
- ğŸ“§ **API PÃºblica** - IntegraÃ§Ãµes com CRMs externos

---

## ğŸ› ï¸ Stack TecnolÃ³gica

| Tecnologia | VersÃ£o | PropÃ³sito |
|------------|--------|-----------|
| **Next.js** | 14.0.2 | Framework React para API |
| **TypeScript** | 5.2.2 | Tipagem estÃ¡tica rigorosa |
| **Supabase** | Latest | Banco PostgreSQL + Auth |
| **Telegraf** | 4.15.0 | SDK Telegram Bot API |
| **Vercel** | - | Deploy e hospedagem |
| **date-fns** | 2.30.0 | ManipulaÃ§Ã£o de datas com locale PT-BR |
| **Zod** | 3.22.4 | ValidaÃ§Ã£o de schemas |

---

## ğŸš€ InÃ­cio RÃ¡pido

### ğŸ“‹ **PrÃ©-requisitos**

- Node.js 18+ 
- npm ou yarn
- Conta no Supabase
- Bot Token do Telegram (via @BotFather)
- Conta na Vercel (deploy gratuito)
- ServiÃ§o de cron-job (EasyCron recomendado)

### âš¡ **InstalaÃ§Ã£o Local**

```bash
# 1. Clone o repositÃ³rio
git clone https://github.com/rafak1ngz/ZettiBot.git
cd ZettiBot

# 2. Instale as dependÃªncias
npm install

# 3. Configure as variÃ¡veis de ambiente
cp .env.example .env.local
# Edite o .env.local com suas chaves

# 4. Execute em desenvolvimento
npm run dev
```

### ğŸ”§ **ConfiguraÃ§Ã£o das VariÃ¡veis**

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=seu_bot_token_aqui
WEBHOOK_URL=https://seu-dominio.vercel.app
WEBHOOK_SECURITY_KEY=chave_secreta_unica

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://seu-projeto.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua_chave_publica
SUPABASE_SERVICE_ROLE_KEY=sua_chave_privada
```

### ğŸš€ **Deploy na Vercel**

```bash
# 1. Instale a CLI da Vercel
npm i -g vercel

# 2. FaÃ§a login e configure
vercel login
vercel

# 3. Configure as variÃ¡veis de ambiente no dashboard da Vercel

# 4. Configure o webhook do Telegram
curl -X POST "https://api.telegram.org/bot{SEU_TOKEN}/setWebhook" \
     -H "Content-Type: application/json" \
     -d '{"url": "https://seu-app.vercel.app/api/telegram/webhook"}'

# 5. Configure cron-job no EasyCron (https://www.easycron.com)
# URL: https://seu-app.vercel.app/api/notifications/process
# FrequÃªncia: Every 1 minute
# Headers: Authorization: Bearer {WEBHOOK_SECURITY_KEY}
```

---

## ğŸ“± Como Usar

### ğŸ¬ **Primeiros Passos**

1. **Inicie uma conversa** com seu ZettiBot no Telegram
2. **Digite `/start`** para criar sua conta
3. **ForneÃ§a seu email** quando solicitado
4. **Explore o menu principal** e suas funcionalidades

### ğŸ“‹ **Comandos DisponÃ­veis**

| Comando | DescriÃ§Ã£o | Status |
|---------|-----------|--------|
| `/start` ou `/inicio` | Iniciar ou criar conta | âœ… |
| `/ajuda` | Lista todos os comandos | âœ… |
| `/clientes` | Gerenciar base de clientes | âœ… |
| `/agenda` | Organizar compromissos | âœ… |
| `/lembretes` | Criar e gerenciar lembretes | âœ… |
| `/followup` | Acompanhar leads e pipeline | âœ… ğŸ†• |
| `/cancelar` | Cancelar operaÃ§Ã£o atual | âœ… |

### ğŸ”„ **Fluxos Principais**

**Adicionar Cliente:**
1. `/clientes` â†’ "Adicionar novo cliente"
2. Informe: Nome da empresa â†’ CNPJ â†’ Contato â†’ Telefone â†’ Email
3. Confirme os dados e salve

**Agendar Compromisso:**
1. `/agenda` â†’ "Novo Compromisso"
2. Escolha vincular a cliente ou nÃ£o
3. Defina: TÃ­tulo â†’ Data â†’ Hora â†’ Local
4. Configure notificaÃ§Ã£o (15min a 24h antes)
5. Confirme o agendamento

**Criar Lembrete:**
1. `/lembretes` â†’ "Criar Lembrete"
2. Defina: TÃ­tulo â†’ Data â†’ Hora â†’ DescriÃ§Ã£o â†’ Prioridade
3. Configure notificaÃ§Ã£o (5min a 24h antes)
4. Confirme o lembrete

**Iniciar Follow-up:** ğŸ†•
1. `/followup` â†’ "Novo Follow-up"
2. Busque cliente existente ou crie novo
3. Defina: TÃ­tulo â†’ EstÃ¡gio â†’ Valor Estimado â†’ Data Prevista
4. Configure prÃ³xima aÃ§Ã£o e notificaÃ§Ã£o
5. Acompanhe evoluÃ§Ã£o do lead

**Registrar Contato:** ğŸ†•
1. Acesse follow-up ativo
2. "Registrar Contato" â†’ Tipo de contato
3. Descreva resumo da interaÃ§Ã£o
4. Defina prÃ³xima aÃ§Ã£o e data
5. Atualize estÃ¡gio se necessÃ¡rio

---

## ğŸ—‚ï¸ Arquitetura do Projeto

### ğŸ“ **Estrutura de Pastas**

```
src/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase/           # ConfiguraÃ§Ã£o do banco
â”‚   â””â”€â”€ telegram/           # Core do bot
â”‚       â”œâ”€â”€ commands/       # MÃ³dulos de comandos
â”‚       â”‚   â”œâ”€â”€ clientes/   # GestÃ£o de clientes
â”‚       â”‚   â”œâ”€â”€ agenda/     # GestÃ£o de agenda
â”‚       â”‚   â”œâ”€â”€ lembretes/  # Sistema de lembretes
â”‚       â”‚   â””â”€â”€ followup/   # Follow-up de leads ğŸ†•
â”‚       â”œâ”€â”€ middleware/     # Middlewares
â”‚       â””â”€â”€ notifications/  # Sistema de notificaÃ§Ãµes
â”œâ”€â”€ pages/api/             # Endpoints da API
â”œâ”€â”€ types/                 # Tipos TypeScript
â””â”€â”€ utils/                 # UtilitÃ¡rios compartilhados
```

### ğŸ” **Desenvolvimento Local**

```bash
# Desenvolvimento com hot reload
npm run dev

# Build para produÃ§Ã£o
npm run build

# Iniciar em produÃ§Ã£o
npm start

# Testes (quando implementados)
npm test

# Usar ngrok para expor porta local
npx ngrok http 3000

# Configure webhook temporÃ¡rio
curl -X POST "https://api.telegram.org/bot{TOKEN}/setWebhook" \
     -d "url=https://seu-ngrok-url.ngrok.io/api/telegram/webhook"

# Teste notificaÃ§Ãµes manualmente
curl -X POST "http://localhost:3000/api/notifications/test" \
     -H "Authorization: Bearer {WEBHOOK_SECURITY_KEY}" \
     -d '{"telegram_id": 123456789, "tipo_teste": "envio_direto"}'
```

### ğŸ” **Debug e Logs**

- **Desenvolvimento**: Logs detalhados no console
- **ProduÃ§Ã£o**: Vercel Dashboard para logs de runtime
- **Banco**: Supabase Dashboard para monitoramento
- **NotificaÃ§Ãµes**: Logs timestampados com resultado de envio

---

## ğŸ”§ ConfiguraÃ§Ã£o do Banco (Supabase)

### ğŸ“Š **Tabelas Principais**

```sql
-- UsuÃ¡rios do sistema
users (id, telegram_id, email, username, full_name, created_at, last_active)

-- Clientes cadastrados
clientes (id, user_id, nome_empresa, cnpj, contato_nome, contato_telefone, contato_email, observacoes)

-- Compromissos agendados
compromissos (id, user_id, cliente_id, titulo, descricao, data_compromisso, local, status)

-- Lembretes pessoais
lembretes (id, user_id, titulo, descricao, data_lembrete, prioridade, status, created_at, updated_at)

-- Follow-ups de leads ğŸ†•
followups (id, user_id, cliente_id, titulo, estagio, valor_estimado, data_inicio, data_prevista, ultimo_contato, proxima_acao, descricao, status)

-- HistÃ³rico de contatos ğŸ†•
contatos_followup (id, followup_id, user_id, data_contato, tipo_contato, resumo, proxima_acao, observacoes)

-- NotificaÃ§Ãµes automÃ¡ticas
notificacoes (id, user_id, telegram_id, tipo, titulo, mensagem, agendado_para, status, tentativas)

-- SessÃµes de conversa
sessions (id, telegram_id, user_id, command, step, data, updated_at)

-- Logs de auditoria
audit_logs (id, user_id, telegram_id, acao, detalhes, timestamp)
```

---

## ğŸ¤ Contribuindo

ContribuiÃ§Ãµes sÃ£o bem-vindas! Por favor:

1. **Fork** o projeto
2. **Crie uma branch** para sua feature (`git checkout -b feature/NovaFuncionalidade`)
3. **Commit** suas mudanÃ§as (`git commit -m 'feat: adiciona nova funcionalidade X'`)
4. **Push** para a branch (`git push origin feature/NovaFuncionalidade`)
5. **Abra um Pull Request**

### ğŸ“‹ **Diretrizes de ContribuiÃ§Ã£o**

- Siga os padrÃµes de cÃ³digo TypeScript
- Mantenha a arquitetura modular existente
- Adicione logs de auditoria para aÃ§Ãµes importantes
- Use utilitÃ¡rios de timezone para datas
- Documente novas funcionalidades
- Siga os padrÃµes de commit convencionais

---

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo [LICENSE](LICENSE) para detalhes.

---

## ğŸ“ Suporte

- ğŸ“§ **Email**: contato@zettibot.com
- ğŸ’¬ **Telegram**: @ZettiBotSupport  
- ğŸ› **Issues**: [GitHub Issues](https://github.com/rafak1ngz/ZettiBot/issues)
- ğŸ“– **DocumentaÃ§Ã£o**: [Changelog](CHANGELOG.md)

---

## ğŸ¯ Roadmap

### âœ… **v1.2.0 - LANÃ‡ADO (23/07/2025)**

- âœ… Sistema completo de follow-up de leads
- âœ… Pipeline de vendas com 5 estÃ¡gios
- âœ… HistÃ³rico detalhado de contatos
- âœ… NotificaÃ§Ãµes automÃ¡ticas para follow-ups
- âœ… Interface avanÃ§ada com criaÃ§Ã£o inline de clientes

### âœ… **v1.1.0 - LANÃ‡ADO (21/07/2025)**

- âœ… Sistema completo de lembretes
- âœ… NotificaÃ§Ãµes automÃ¡ticas para lembretes
- âœ… Interface aprimorada com prioridades visuais
- âœ… IntegraÃ§Ã£o completa com sistema existente

### âœ… **v1.0.0 - LANÃ‡ADO (20/07/2025)**

- âœ… Sistema de usuÃ¡rios e autenticaÃ§Ã£o
- âœ… CRUD completo de clientes
- âœ… Sistema de agenda completo
- âœ… NotificaÃ§Ãµes automÃ¡ticas
- âœ… Arquitetura modular robusta
- âœ… GestÃ£o de fuso horÃ¡rio brasileiro
- âœ… ValidaÃ§Ãµes e tratamento de erros

### ğŸ”„ **v1.3.0 - EM PLANEJAMENTO**

- ğŸ”„ RelatÃ³rios e analytics de vendas
- ğŸ”„ API pÃºblica para integraÃ§Ãµes
- ğŸ”„ Melhorias de performance
- ğŸ”„ Sistema de metas e objetivos

### ğŸ”® **v2.0.0 - FUTURO**

- ğŸ”® Dashboard web administrativo
- ğŸ”® OtimizaÃ§Ã£o de rotas com Google Maps
- ğŸ”® App mobile nativo
- ğŸ”® InteligÃªncia artificial para insights
- ğŸ”® IntegraÃ§Ã£o com CRMs externos

---

## ğŸ† Status de Qualidade

| MÃ©trica | Status | DescriÃ§Ã£o |
|---------|--------|-----------|
| Funcionalidade | ğŸŸ¢ 100% | Core features + follow-up implementadas |
| Estabilidade | ğŸŸ¢ 99.9% | Sistema robusto em produÃ§Ã£o |
| Performance | ğŸŸ¢ Otimizada | Cache e queries otimizadas |
| SeguranÃ§a | ğŸŸ¢ Robusta | Rate limiting e validaÃ§Ãµes |
| Manutenibilidade | ğŸŸ¢ Excelente | CÃ³digo modular e documentado |
| Pipeline de Vendas | ğŸŸ¢ Completo | Follow-up profissional implementado |

---

## ğŸ™ Agradecimentos

- **Equipe Telegram** pela excelente Bot API
- **Vercel** pela plataforma de deploy gratuita
- **Supabase** pelo backend completo e confiÃ¡vel
- **Claude (Anthropic)** pela parceria incansÃ¡vel no desenvolvimento
- **Comunidade Open Source** pelas bibliotecas incrÃ­veis

---

<div align="center">

**Desenvolvido com â¤ï¸ por [Rafael Dantas](https://github.com/rafak1ngz)**

**ZettiBot v1.2.0** - *Transformando caos em estratÃ©gia desde 2025*

[â­ Star no GitHub](https://github.com/rafak1ngz/ZettiBot) â€¢ [ğŸ› Reportar Bug](https://github.com/rafak1ngz/ZettiBot/issues) â€¢ [ğŸ’¡ Sugerir Feature](https://github.com/rafak1ngz/ZettiBot/issues) â€¢ [ğŸ“‹ Changelog](CHANGELOG.md)

</div>